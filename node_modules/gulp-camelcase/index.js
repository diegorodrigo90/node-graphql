// through2 is a thin wrapper around node transform streams
var through2 = require('through2').obj;



/**
 *
 * Plugin level function(dealing with files)
 *
 * @param dashesText
 */
function gulpCamelcase(dashesText) {

  // Creating a stream through which each file will pass
  return through2(function (file, enc, callback) {
    if (file.isNull()) {
      return callback(null, file);
    } else {
      var newFile = file.clone();
      var contents = newFile.contents.toString();
      contents = contents.replace(/[-]+([a-z]|$)/g, function (characters) {
        return characters[1].toUpperCase();
      });
      newFile.contents = new Buffer(contents);
    }
    callback(null, newFile);
  });

}

// Exporting the plugin main function
module.exports = gulpCamelcase;